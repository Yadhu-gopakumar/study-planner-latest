<div id="chat-history-container" class="space-y-6">
    {% for msg in messages %}
        {% if msg.role == "user" %}
            <div class="flex items-start justify-end space-x-3 ml-auto max-w-[80%]">
                <div class="bg-indigo-600 p-4 rounded-[1.5rem] rounded-tr-none shadow-md">
                    <p class="text-sm text-white leading-relaxed">{{ msg.content }}</p>
                </div>
            </div>
        {% else %}
            <div class="flex items-start space-x-3 max-w-[80%]">
                <div class="w-8 h-8 bg-indigo-100 rounded-lg flex-shrink-0 flex items-center justify-center text-sm">ðŸ¤–</div>
                <div class="bg-white p-4 rounded-[1.5rem] rounded-tl-none shadow-sm border border-gray-100">
                    <p class="text-sm text-gray-700 leading-relaxed">{{ msg.content }}</p>
                </div>
            </div>
        {% endif %}
    {% endfor %}

    <div id="new-messages-target"></div>
</div>

<input type="hidden" name="subject_id" id="subject_id" value="{{ subject.id }}" hx-swap-oob="true">