
<!-- EXAM LIST PAGE -->
<!-- templates/exams/list.html -->
{% extends 'base.html' %}
{% block title %}Exam Schedule{% endblock %}
{% block content %}
<div class="space-y-6">
    <div class="flex justify-between items-center">
        <h1 class="text-3xl font-bold text-gray-900">üìù Exam Schedule</h1>
        <div class="flex space-x-3">
            <a href="{% url 'upload_timetable' %}" 
               class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 font-medium">
                üì§ Upload Timetable
            </a>
            <a href="{% url 'add_exam' %}" 
               class="bg-white border px-6 py-3 rounded-lg hover:bg-gray-50 font-medium">
                + Add Exam Manually
            </a>
        </div>
    </div>

    <!-- Upcoming Exams Timeline -->
    {% if upcoming_exams %}
    <div class="bg-white rounded-xl p-6 shadow-sm border">
        <h2 class="text-xl font-bold text-gray-900 mb-6">Upcoming Exams</h2>
        <div class="space-y-4">
            {% for exam in upcoming_exams %}
            <div class="flex items-center p-4 rounded-lg border-l-4 
                {% if exam.days_left <= 3 %}border-red-500 bg-red-50
                {% elif exam.days_left <= 7 %}border-orange-500 bg-orange-50
                {% else %}border-blue-500 bg-blue-50{% endif %}">
                
                <div class="flex-shrink-0 text-center w-20">
                    <p class="text-3xl font-bold text-gray-900">{{ exam.exam_date.day }}</p>
                    <p class="text-sm text-gray-600">{{ exam.exam_date|date:"M" }}</p>
                </div>

                <div class="flex-grow ml-6">
                    <h3 class="font-bold text-lg text-gray-900">{{ exam.subject.name }}</h3>
                    <p class="text-sm text-gray-600">{{ exam.exam_name }}</p>
                    <div class="flex items-center space-x-4 mt-2 text-sm text-gray-600">
                        <span>üïê {{ exam.exam_time }}</span>
                        <span>‚è±Ô∏è {{ exam.duration_minutes }} mins</span>
                        <span>üìä {{ exam.total_marks }} marks</span>
                    </div>
                </div>

                <div class="text-right">
                    <span class="inline-block px-4 py-2 rounded-full text-sm font-bold
                        {% if exam.days_left <= 3 %}bg-red-200 text-red-800
                        {% elif exam.days_left <= 7 %}bg-orange-200 text-orange-800
                        {% else %}bg-blue-200 text-blue-800{% endif %}">
                        {{ exam.days_left }} day{{ exam.days_left|pluralize }} left
                    </span>
                    <p class="text-xs text-gray-500 mt-2">{{ exam.readiness }}% ready</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <div class="text-center py-12 bg-white rounded-xl border">
        <span class="text-6xl mb-4 block">üìÖ</span>
        <h3 class="text-xl font-semibold text-gray-900 mb-2">No exams scheduled</h3>
        <p class="text-gray-500 mb-6">Upload your exam timetable to get started</p>
        <a href="{% url 'upload_timetable' %}" 
           class="inline-block bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 font-medium">
            Upload Timetable
        </a>
    </div>
    {% endif %}

    <!-- Completed Exams -->
    {% if completed_exams %}
    <div class="bg-white rounded-xl p-6 shadow-sm border">
        <h2 class="text-xl font-bold text-gray-900 mb-4">‚úÖ Completed Exams</h2>
        <div class="space-y-2">
            {% for exam in completed_exams %}
            <div class="flex items-center justify-between p-3 border rounded-lg bg-gray-50">
                <div>
                    <p class="font-medium text-gray-900">{{ exam.subject.name }}</p>
                    <p class="text-sm text-gray-600">{{ exam.exam_date|date:"M d, Y" }}</p>
                </div>
                <span class="text-green-600 text-sm">‚úì Completed</span>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}